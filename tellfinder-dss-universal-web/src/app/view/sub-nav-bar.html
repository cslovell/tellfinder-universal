<!--
  ~ Copyright 2017 Uncharted Software Inc.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<template>
  <nav class="navbar navbar-default sub-nav-bar-container" role="navigation">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#sub-nav-collapse">
        <span class="sr-only">Toggle Navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

    <div class="collapse navbar-collapse" id="sub-nav-collapse">

      <ul class="nav nav-tabs">
        <!-- Sorting -->
        <li if.bind="hasData" class="dropdown ${isSortSettingsOpen?'open':''} pull-right">
          <button click.delegate="dropdownSortToggle()" class="dropdown-toggle sub-navbar-btn sort-dropdown-btn" role="button" aria-expanded="false" title="Change sort criteria">
            <i class="fa fa-sort-amount-${searchModel.order} icon-pad-right"></i>
            Sort By<i class="fa fa-angle-down icon-pad-left"></i>
          </button>
          <ul class="dropdown-menu unpadded-top" role="menu" onmouseleave.bind="mouseleavesort">
            <div class="sort-order-container">
              <button class="sub-navbar-btn sort-order-btn ${(searchModel.order === 'desc')? 'active' : ''}" title="Change sort order" click.delegate="setSearchOrder('desc')">
                <i class="fa fa-sort-amount-desc icon-pad-right"></i>Desc
              </button>
              <button class="sub-navbar-btn sort-order-btn ${(searchModel.order === 'asc')? 'active' : ''}" title="Change sort order" click.delegate="setSearchOrder('asc')">
                <i class="fa fa-sort-amount-asc icon-pad-right"></i>Asc
              </button>
            </div>
            <li repeat.for="primarySortProperty of primarySortProperties">
              <a href="${primarySortProperty.url}">
                <i css="visibility:${primarySortProperty.name===selectedSort?'visible':'hidden'};"
                   class="fa fa-check"></i>
                ${primarySortProperty.displayName}
              </a>
            </li>
            <hr>
            <li repeat.for="secondarySortProperty of secondarySortProperties">
              <a href="${secondarySortProperty.url}">
                <i css="visibility:${secondarySortProperty.name===selectedSort?'visible':'hidden'};"
                   class="fa fa-check"></i>
                ${secondarySortProperty.displayName}
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>
</template>
